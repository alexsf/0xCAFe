package com.hpe.hackathon.runner;

import java.io.IOException;
import java.io.InputStream;

import com.hpe.hackathon.stanford.nlp.*;

import opennlp.tools.parser.ParserFactory;
import opennlp.tools.parser.ParserModel;
import opennlp.tools.cmdline.parser.ParserTool;
import opennlp.tools.parser.Parse;
import opennlp.tools.parser.Parser;
import opennlp.tools.util.InvalidFormatException;

public class HackathonRunner {

    public static void main(String[] args) {
       try {
           //new HackathonRunner().parseOpenNlp();
           new HackathonRunner().parseStanfordNlp();
       }
       catch(Exception e) {
           e.printStackTrace();
       }

    }
    
    public  void parseOpenNlp() throws InvalidFormatException, IOException {
        InputStream is = getClass().getResourceAsStream("/en-parser-chunking.bin");
        ParserModel model = new ParserModel(is);
        Parser parser = ParserFactory.create(model);
        
        String sentence = "This camera has great zoom and resolution";// I never had such a smooth ice cream.";
        //String sentence = "The cow jumped over the moon";
        Parse topParses[] = ParserTool.parseLine(sentence, parser, 5);
        
        //StringBuffer sb = new StringBuffer();
        for (Parse p : topParses) {
            //p.showCodeTree();
            p.show();
            System.out.println(p.getProb());
        }
        
        is.close();
        // (TOP (S (NP (DT This) (NN ice) (NN cream)) (VP (VBZ is) (ADJP (JJ smooth) (CC and) (JJ delicious)))))
        
    }
    
    public void parseStanfordNlp() {
        String text = "Nov 24 2009     Beautiful property but small rooms      Great hotel, the front desk service was extremely slow/disorganized. The room was small, but tidy and clean. Bathroom was in great vintage standing. The constant hill climbing was a bit tedious over 4 days - but certainly good for the legs!        Nov 23 2009     Beautiful room in a historic hotel      I had a free night from priority club rewards, and it was quite a treat. We ended up getting an upgrade to a corner suite on the 12th floor. It was a gorgeous room with an amazing view. Everything in the room was luxurious and comfortable. We enjoyed cocktails at the Top of the Mark. What a great experience. As far as the downsides go, internet was not complimentary. The hotel elevators were slow and check in and check out was quite delayed.I would definitely stay here again.        Nov 19 2009     Wish it had been less noisy     We spent a weekend at the Mark Hopkins and here are our thoughts.PRO:Service - every employee we had contact with was helpful, courteous, and quickRoom - we had a business room which was plenty big for the 2 of usLocation - top of the hill, at the crossing of 2 cable car runs, near China Town, near Union SquareTop of the Mark - quite a view, good place to have a glass of wine at the end of the dayCON:Noise - the pipes rattled whenever someone used a shower or toilet, we had a front facing room which had traffic noise, also near elevator so noise from people waiting for elevator could be heardOTHER:It is at the top of a hill. We walked to Fisherman's Wharf (downhill) easily. Would not have wanted to walk back (uphill). It was bad enough from China Town.Being near the cable car routes are nice but only if you can use them. Depending on time of day they can be constantly full. The line at the Fisherman's Wharf end can easily be an hour long. Plan on cabs if you need to be somewhere at a specific time.Bottom line - there are a lot of very nice hotels in the area that are probably a better value. You can always go to the Top of the Mark without staying there.    Nov 19 2009     Good location nice room hotel geared to business clients        The hotel is located at the top of Nob Hill - lovely location (although up a very steep hill!). The higher the floor, the higher the price as this corresponds with the views of San Fransisco Bay and the city. The hotel has an impressive entrance and the room we stayed in, a standard room, was clean with a large comfortable bed and nice linen. The bathroom had a good over bath shower and good toiletries, although the bath was very shallow and would have been very unsatisfying for a soak. Tea and coffee was provided, although there was no option of fresh milk. We weren't offered the option of booking for breakfast or any meals and weren't told of any of the hotel's services (such as the Top of the Mark restaurant and skybar - but beware there is a dress code including no sports shoes) The hotel did seem to cater much more to the business market and was impersonal.      Nov 4 2009      Excellent service -- solid value        We stayed for 2 nights in October. We got a very good AAA rate ($190 one night, $159 the 2nd night). Room was comfortable, large enough for two. The location was excellent ... in a relatively quiet area of SF, but close enough to the action. Valet parking was definitely expensive, so try to find something cheaper. We got wonderful service from the staff ... including when my wife got ill. They were extremely attentive. Overall a well staffed hotel, with excellent service, and a great value under $200.      Oct 9 2009      A good place to stay in San Francisco   The hotel locates on the top of Nob hill with fantastic view in its sky bar on the top. The hotel itself is full of history. The conference rooms are splendid. It is very easy to walk from the hotel to the nearby places such as Union Square, Chinatown because of the advange of going downhill. But it may take some efforts for coming back. All three lines of cable cars have stations closed to the hotel, but during peak hour, it is difficult to catch one. Oh, the cable car museum is very close to the hotel, which is a very interesting place. The hotel room is a little bit small, but clean. It is quite typical for a old hotel. Great place for staying in San Francisco.        Oct 8 2009      Convenient location Nob Hill with the sound of clanging wall pipes      $250 CONFERENCE RATE room with smallish, nicely furnished, though underwhelming bathroom, shower and shower supplies. Biggest issue was the constantly clanging pipes in the bathroom wall in this old hotel, the sound of which was intrusive. Lobby small, valet parking overpriced for area @ $50 a day--cheaper public parking is available within 1-2 blocks. Pluses: on cable car lines with easy access to other SF attractions including Wharf, Chinatown, Union Square; varied view from smallish windows; great local restaurants nearby, nice view from overpriced bar, Top of Mark, and overall friendly staff. If you stay here, ask for a room without pipes clanging.    Oct 8 2009      Luxurious hotel great location! I loved our stay at the Intercontinental Mark Hopkins. The room was beautiful - clean, spacious and incredibly comfortable beds. The staff were friendly and helpful. The location was central to walking or taking a trolley anywhere. It was a great stay and I'd stay again! And the rates were good for such a nice place!  Oct 8 2009      Club Lounge at the Mark Hopkins is IDEAL for teenagers and extended family!     We traveled to San Francisco for our small wedding at Grace Cathedral, just down the street from the Mark Hopkins. I can not say enough about the fabulous staff in the Club Lounge. With all day food and drinks, it was perfect for teenage boys but was also a great place to relax as a group. Even the grandparents loved it. Nancy and Jonathan in the lounge will help with anything and everything.     Oct 8 2009      Beautiful historic hotel!       My husband and I stayed for a long weekend in September with our 6yr old son. We got a good deal through Hotwire, $220/nt. The room was comfortable and well appointed, if a bit small. The service was great. The concierge was very helpful recommending terrific restaurants every night. We also used the nanny service they suggest and they are great! We have only 2 complaints: 1) the ice maker on our floor was broken. This was fantastic for our son who loved riding the elevator down a few floors to get ice! 2) Room service and restaurant hours are short. We would stay there again if we could get another good deal. .     Oct 2 2009      Not top of the Mark anymore     We love San Francisco and keep going back, but each time we've tried different hotels in different areas ranging from Fishermans Wharf to the Market Street/Union Square area, and this time we opted for Nob Hill.So we stayed at the Mark Hopkins for 3 nights over a long September weekend; and as a platinum IHG Priority Club member I used my points to pay for the stay. So I can't really comment on rates; except to say that had we had to use our own money for our SF accommodations we would have probably chosen somewhere else.Let's start with the pros:First off, the Mark Hopkins isn't a bad hotel, it's just that it was once a grand old lady, and now is more of a convention or business type hotel. It still has some nice character features and charm, such as the antique postal chute at the elevators, and the location is pretty good, depending on your reasons for visiting SF most things are accessible; there are 2 cable car lines intersecting a block from the hotel. The beds are pretty comfortable, which is always an important consideration when like us you've been travelling for 15 hours, and are in a totally different time zone. The staff are also fairly friendly, particularly the porters who were all very helpful and always seemed in good spirits.However, for us there were also some unfortunate cons:The soundproofing on the rooms isn't good at all. We were often disturbed by other guests flushing their toilets, and by people walking past in the corridor; plus as our room was on a fairly low floor, overlooking the front of the hotel where the porters use a loud whistle to attract taxis for guests, this would disturb us late into the evening, and again early in the morning.The rooms themselves were fairly small by US standards, with very little storage for guests with a reasonable amount of luggage (SF was the start of a 2 week vacation for us). I guess it's due to the age of the hotel; but as I mentioned earlier as a platinum Priority Club member one of the perks is an upgraded room; so if ours was small I would imagine the standard rooms would be even smaller.Breakfast at the Top of the Mark was the most disappointing element of the whole stay though. We happened to go up there on a foggy morning, which of course is not the hotels fault, but we didn't obviously get the famed view as an accompaniment to breakfast. However without anything of a view but a blanket of white to look at out of the windows, then it brought the breakfast itself into much sharper contrast. The breakfast was a very average buffet; if you travel at all for business it's the same breakfast you'll have had time and time again at just about every chain hotel out there. We didn't go particularly late for breakfast, but there was very little of it left, and what was there had clearly been out for some time. So the selection we were faced with almost felt like the leftovers that other people hadn't wanted. Also we felt that the prices being charged were way too high. This was the most we were charged for breakfast anywhere in California, and that included some individually prepared gourmet breakfasts (with gourmet coffee and freshly squeezed OJ) at five star resorts in the Napa Valley - which isn't exactly known for it's good value. Our last gripe with the breakfast, was that along with the bill came a 'guide to gratuities for international guests' suggesting an 18-20% gratuity on top of the already very high bill. Now we really don't have a problem tipping for good service, and we are fully aware that service staff in the US rely on tips to make up for low wages; but we found it offensive to suggest a gratuity of that level for a very ordinary buffet - where nothing at all was prepared fresh for us, no-one took an order from us, or brought anything to the table for us and other than a busboy filling our coffee there was no other actual 'service' involved.A few blocks away from the hotel down the hill towards Union Square is a bit of a cliched but charming nonetheless, 50's style diner, which prepares fresh food, has friendly and efficient service; and which blows away the breakfast at the Top of the Mark. Not to mention it costs about half as much. For us there was no comparison.If you do choose to stay at the Mark Hopkins, then one other tip for you: We bought MUNI cards for the duration of our stay after being advised that they were the most economical way to use the cable car to avoid having to walk up and down the steep hills in the area. However on a September weekend, the cable car itself is a major tourist attraction and not really a reliable method of public transport. We would wait at the cable car stops for ages and ages, whilst car after car would go by completely full up with people. At the terminus on Market the queue would often be in the region of an hour or so wait. It's almost like relying on the 'Pirates of the Carribbean' ride at Disneyland for your transportation. So in the end we used a 3 day MUNI pass for two cable car trips, and walked up and down the hills every other time; so they didn't turn out to be such great value for us as we'd hoped. Luckily we were fit enough for that not to be a problem, but that's us, we happen to like walking.  Sep 28 2009     Good location excellent views good room but lacks something     I stayed at the MH for a week with my girl friend but was attending a convention across the street at the fairmont. I was satisfied with everything, except that the communication from IHC mentions that as an ambassador level guest (its their loyalty program) I get free complementary fruit basket and newspaper everyday, which I never got.The only thing this hotel lacks is a good lobby - particularly compared to the Fairmont. Other than that, it has a few things better than the fairmont - the view from Top of the Mark (their bar/restaurant/cafe on the top floor) is outstanding - particularly facing north. ";
        //String text = "Once again Garmin has churned out a toy for tech nerds rather than a functional GPS product. The crack team of reviewers at Cnet spends more time testing the phone book merging capabilities, blue tooth, speach recognition and MP3 and audio book features than it does on the core GPS funtion (nice job guys you missed the boat again as this thing is horrible at getting you from point A to B - try starting with the basics before getting all hyped up with the nerd features). As usual for a Garmin product this GPS only feeds you one spoken direction at a time. In some instances the next direction appears in text on the screan slightly before it is spoken but even this is often unclear because it is often truncated (does not fit on screen). The result is that if you are being told to go from the 405 freeway to the 110 you don't know which direction to go on the 110 because the Garmin system waits to feed you the next turn until after you have completed the current turn. However, when merging freeways, you need to select the east, west, north or south direction BEFORE you exit and since the Garmin is ALWAYS late with this direction, you make the wrong guess 50% of the time and have to exit the freeway and turn around. In LA this can cause a 20-30 minute delay. Other GPS like the Navigon show you a reality view of the freeway (the lanes appear on screen as they do in real life) and there is a graphical arrow that directs you to the exact lane you should take to exit or merge on a freeway. The Navigon also has the next direction on screen along with an arrow if that direction calls for a turn (this solves the truncated problem). TomTom and Magellen devices also give you the next direction and show an arrow if that direction requires you to turn. The Garmin, on the other hand, will sometimes pop up a text direction of the next turn just before you merge allowing you to sometimes be able to swerve into the correct lane but the direction comes up so late that you usually cannot make the lane change without causing an accident. Moreover, especially on freeways exits that join multiple other freeways (e.g., exit for the and 101, highway 2) the written direction is truncated and you have no idea which of the multiple exit lanes to choose until you are about a quarter of a mile going the wrong way. This also happens on city streets where you have to make two turns within a few blocks of each other. The Garmin does not tell you about the second turn until it is too late to get into the lane. Other GPS systems like the Navigon tell you \"turn right and make an immediate left\" and they also give you two written directions (next two turns) along with an arrow showing the second turn.. To me the Cnet editors just don't get it. I need GPS to get me to the meeting not get me lost. Having my blackberry phone book download automatically to the Garmin is great because I need the numbers to call when I get lost and am going to be late. I just don't understand who uses their GPS for MP3s (the speakers suck) and video games? you have got to be kidding. If you want to do this stuff buy a cheap laptop its half the price. If you truely want a good GPS system DO NOT BUY this piece of junk- it does everything well except guide you to your destination..";
        //String text = "The only small annoyance is when setting the music player and directional sound at 100% the sound for directions is much lower making difficult at times to hear.. Hopefully Garmin will create a patch for this?. Summary:. Hands down the nicest Garmin I?ve owned. Love the new mounting system; nice and secure with no rattles. These units can be had for $490 if you shop around thus making it a very nice price considering all the extras.. This unit is especially nice if you travel, sleek and easy to pack, likewise you can insert a micro SD card preloaded with maps of the country in which you?re traveling without needing to change map sets that were preloaded!. ";
        //String text = "Cafe is conveniently located on Pier 39 in San Fransisco and offers a great view of the bay along with a good hearty breakfast. I had heard some mixed things about Cafe but I wanted to see for myself so I went Sunday morning before my flight home. The restaurant itself is very clean and as expected for being in the middle of a big tourist location it is pretty busy. My meal consisted of banana and pecan french toast, country potatoes, fruit and 2 eggs over easy. The food was good but not great, my biggest complaint was the syrup was very thin and not super flavorful and the french toast was a little dry. 3 stars for A ok (not bad)";
        Extract extract = Extract.getInstance();
        java.util.List<Pattern> patterns = extract.run(text);
        //patterns = new Postprocess().run(patterns);
        for (Pattern pattern : patterns) {
            //System.out.println(pattern.toAspect());
            System.out.println(String.format("%s------->%s", pattern.head, pattern.modifier));
        }
    }

}
